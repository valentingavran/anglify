<div class="outer-prepend">
  <ng-container *ngTemplateOutlet="prependOuterIconTemplate"></ng-container>
</div>
<div class="form-field-container">
  <div class="form-field-border">
    <div class="start"></div>
    <div class="notch" *ngIf="type === 'outlined'">
      <span>
        <ng-container *ngTemplateOutlet="labelTemplate"></ng-container>
      </span>
    </div>
    <div class="end"></div>
  </div>
  <div class="prepend" #prependItem>
    <ng-container *ngTemplateOutlet="prependIconTemplate"></ng-container>
    <ng-container *ngIf="prefix">{{ prefix }}</ng-container>
  </div>
  <label>
    <span class="label" *ngIf="labelDirective || label" [style.margin-inline-start]="outlinedLabelPrefixMargin$ | async">
      <ng-container *ngTemplateOutlet="labelTemplate"></ng-container>
    </span>
    <ng-content select="[anglifyInput]"></ng-content>
  </label>
  <div class="append">
    <ng-container *ngIf="suffix">{{ suffix }}</ng-container>
    <ng-container *ngTemplateOutlet="appendIconTemplate"></ng-container>
  </div>
</div>
<div class="outer-append">
  <ng-container *ngTemplateOutlet="appendOuterIconTemplate"></ng-container>
</div>
<div class="details">
  <div class="hint">
    <ng-container *ngIf="error$ | async as error; else hintTemplate">{{ error }}</ng-container>
    <ng-template #hintTemplate>
      {{ hint }}
    </ng-template>
  </div>
  <div class="counter" *ngIf="_counter">
    {{ input?.length$ | async }}<span *ngIf="input?.maxLength$ | async as maxLength">/{{ maxLength }}</span>
  </div>
</div>
<ng-template #labelTemplate>
  <ng-container *ngIf="labelDirective">
    <ng-container *ngTemplateOutlet="labelDirective.template"></ng-container>
  </ng-container>
  {{ label }}
</ng-template>
<ng-template #prependIconTemplate>
  <ng-container *ngIf="prependIconDirective">
    <ng-container *ngTemplateOutlet="prependIconDirective.template"></ng-container>
  </ng-container>
</ng-template>
<ng-template #prependOuterIconTemplate>
  <ng-container *ngIf="prependOuterIconDirective">
    <ng-container *ngTemplateOutlet="prependOuterIconDirective.template"></ng-container>
  </ng-container>
</ng-template>
<ng-template #appendIconTemplate>
  <ng-container *ngIf="appendIconDirective">
    <ng-container *ngTemplateOutlet="appendIconDirective.template"></ng-container>
  </ng-container>
</ng-template>
<ng-template #appendOuterIconTemplate>
  <ng-container *ngIf="appendOuterIconDirective">
    <ng-container *ngTemplateOutlet="appendOuterIconDirective.template"></ng-container>
  </ng-container>
</ng-template>
